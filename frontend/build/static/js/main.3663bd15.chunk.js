(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{28:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(17),r=n.n(o),s=n(8),i=(n(28),n(21)),l=n(3),d=n(2),u=c.a.createContext(),m=n(0);var j=function(e){var t=c.a.useContext(u),n=t&&e.card.owner===t._id,a="card__removeBtn   ".concat(n?"":"card__removeBtn_type_hidden"),o=0!==e.card.likes.length&&e.card.likes.some((function(e){return t&&e===t._id})),r="card__heart-icon ".concat(o?"card__heart-icon_active":"");return Object(m.jsxs)("li",{className:"card",children:[Object(m.jsx)("div",{className:"card__img",style:{backgroundImage:"url(".concat(e.card.link,")")},onClick:function(){e.onCardClick(e.card)}}),Object(m.jsx)("button",{"aria-label":"Remove",type:"button",className:a,onClick:function(){e.onCardDelete(e.card)}}),Object(m.jsxs)("div",{className:"card__description",children:[Object(m.jsx)("h2",{className:"card__text",children:e.card.name}),Object(m.jsxs)("div",{className:"card__likeSection",children:[Object(m.jsx)("button",{"aria-label":"Heart",className:r,onClick:function(){e.onCardLike(e.card)}}),Object(m.jsx)("h3",{className:"card__likeCount",children:e.card.likes.length})]})]})]})},b=n.p+"static/media/logo.4e8e0a1d.svg";var f=function(e){var t=e.text,n=e.link,a=e.loggedIn,c=e.onSignOut;return Object(m.jsxs)("header",{className:"header section",children:[Object(m.jsx)("img",{src:b,alt:"Around the U.S.",className:"header__logo"}),a?Object(m.jsxs)("ul",{className:"header__nav",children:[Object(m.jsx)("li",{className:"header__link",children:"".concat(t)}),Object(m.jsx)("li",{className:"header__link",onClick:c,children:"Log out"})]}):Object(m.jsx)("div",{className:"header__nav",children:Object(m.jsx)(s.b,{className:"header__link",to:{pathname:"".concat(n)},children:t})})]})};var h=function(){return Object(m.jsx)("footer",{className:"footer section section_narrow",children:Object(m.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Around The U.S."})})};var O=function(e){var t=Object(a.useContext)(u);return Object(m.jsxs)("main",{className:"content",children:[Object(m.jsx)(f,{text:e.email,loggedIn:e.loggedIn,onSignOut:e.onSignOut}),Object(m.jsx)("section",{className:"profile section",children:Object(m.jsxs)("div",{className:"profile__container",children:[Object(m.jsxs)("div",{className:"profile__avatar-container",children:[Object(m.jsx)("img",{src:t&&t.avatar,alt:"profile",className:"profile__avatar"}),Object(m.jsx)("button",{"aria-label":"Edit-Avatar",type:"button",className:"profile__avatar-overlay",onClick:e.onEditAvatar})]}),Object(m.jsxs)("div",{className:"profile__info",children:[Object(m.jsx)("h1",{className:"profile__heading",children:t&&t.name}),Object(m.jsx)("button",{"aria-label":"Edit",type:"button",className:"profile__editBtn",onClick:e.onEditProfile}),Object(m.jsx)("p",{className:"profile__occupation",children:t&&t.about})]}),Object(m.jsx)("button",{"aria-label":"Add",type:"button",className:"profile__addBtn",onClick:e.onAddPlace})]})}),Object(m.jsx)("section",{className:"elements section",children:Object(m.jsx)("ul",{className:"elements__container",children:e.cards.map((function(t){return Object(m.jsx)(j,{card:t,owner:t.owner,onCardClick:e.onCardClick,onCardDelete:function(t){return e.handleCardDelete(t)},onCardLike:function(){e.handleCardLike(t)}},t._id)}))})}),Object(m.jsx)(h,{})]})};var _=function(e){return Object(m.jsx)("div",{className:"modal modal_type_".concat(e.name," ").concat(e.isOpen?"modal_visible":""),children:Object(m.jsxs)("div",{className:"modal__content",children:[Object(m.jsx)("button",{className:"modal__closeBtn",onClick:e.onClose}),Object(m.jsx)("form",{action:"#",className:"form form__type_".concat(e.name),name:e.name,noValidate:!0,onSubmit:e.onSubmit,children:Object(m.jsxs)("div",{className:"form__content",children:[Object(m.jsx)("h3",{className:"form__heading",children:e.title}),e.children,Object(m.jsx)("button",{type:"submit",className:"form__btn",onClick:e.onClose,children:e.buttonText})]})})]})})};var p=function(e){return Object(m.jsx)("div",{className:e.isOpen?"modal modal_type_imgPopup modal_visible":"modal modal_type_imgPopup",children:Object(m.jsxs)("div",{className:"modal__content",children:[Object(m.jsx)("button",{className:"modal__closeBtn",onClick:e.onCardClick}),Object(m.jsxs)("figure",{className:"modal__figure",children:[Object(m.jsx)("img",{src:e.card?e.card.link:"",alt:e.card?e.card.name:"",className:"modal__img"}),Object(m.jsx)("figcaption",{className:"modal__caption",children:e.card?e.card.name:""})]})]})})};var g=function(e){var t=c.a.useContext(u),n=c.a.useState(""),a=Object(l.a)(n,2),o=a[0],r=a[1],s=c.a.useState(""),i=Object(l.a)(s,2),d=i[0],j=i[1];return c.a.useEffect((function(){r(t&&t.name||""),j(t&&t.about||"")}),[t]),Object(m.jsx)(_,{name:"editProfile",title:"Edit Profile",buttonText:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:d})},children:Object(m.jsxs)("fieldset",{className:"form__input-container",children:[Object(m.jsxs)("label",{className:"form__label",children:[Object(m.jsx)("input",{id:"profile-name",onChange:function(e){r(e.target.value)},value:o,type:"text",name:"name",className:"form__item form__item_el_name",placeholder:"Name",minLength:"2",maxLength:"40",required:!0}),Object(m.jsx)("span",{id:"profile-name-error",className:"form__error"})]}),Object(m.jsxs)("label",{className:"form__label",children:[Object(m.jsx)("input",{id:"profile-text",type:"text",name:"title",onChange:function(e){j(e.target.value)},value:d,className:"form__item form__item_el_occupation",placeholder:"Who are you",minLength:"2",maxLength:"200",required:!0}),Object(m.jsx)("span",{id:"profile-text-error",className:"form__error"})]})]})})};var A=function(e){var t=Object(a.useRef)("");return Object(m.jsx)(_,{name:"setAvatar",title:"Change profile picture",buttonText:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t})},children:Object(m.jsxs)("label",{className:"form__label",children:[Object(m.jsx)("input",{ref:t,id:"avatar",type:"url",name:"avatar",className:"form__item form__item_el_url",placeholder:"Image-link",required:!0}),Object(m.jsx)("span",{className:"form__error"})]})})};var x=function(e){var t=c.a.useState(""),n=Object(l.a)(t,2),a=n[0],o=n[1],r=c.a.useState(""),s=Object(l.a)(r,2),i=s[0],d=s[1];return Object(m.jsx)(_,{name:"addCard",title:"Add Place",buttonText:"Create",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:a,link:i})},children:Object(m.jsxs)("fieldset",{className:"form__input-container",children:[Object(m.jsxs)("label",{className:"form__label",children:[Object(m.jsx)("input",{id:"card-title",type:"text",name:"name",onChange:function(e){o(e.target.value)},value:a,className:"form__item form__item_el_title",placeholder:"Title",minLength:"1",maxLength:"30",required:!0}),Object(m.jsx)("span",{id:"card-title-error",className:"form__error"})]}),Object(m.jsxs)("label",{className:"form__label",children:[Object(m.jsx)("input",{id:"card-url",type:"url",name:"link",onChange:function(e){d(e.target.value)},value:i,className:"form__item form__item_el_url",placeholder:"Image-link",required:!0}),Object(m.jsx)("span",{id:"card-url-error",className:"form__error"})]})]})})},v=n(22),N=n(23),C=function(e){var t=e.component,n=Object(N.a)(e,["component"]);return Object(m.jsx)(d.b,{children:function(){return n.loggedIn?Object(m.jsx)(t,Object(v.a)({},n)):Object(m.jsx)(d.a,{to:"/signin"})}})},k=function(e){var t=e.onLogin,n=e.email,a=e.setEmail,c=e.password,o=e.setPassword;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f,{text:"Sign up",link:"/signup"}),Object(m.jsx)("form",{id:"form",action:"#",className:"form login",onSubmit:t,children:Object(m.jsxs)("div",{className:"form__content",children:[Object(m.jsx)("h3",{className:"form__heading form__heading_theme_dark",children:"Log in"}),Object(m.jsxs)("label",{htmlFor:"email",className:"form__label",children:[Object(m.jsx)("input",{type:"email",name:"email",id:"email",value:n,onChange:function(e){a(e.target.value)},className:"form__item form__item_theme_dark",placeholder:"Email",required:!0}),Object(m.jsx)("span",{className:"form__error"})]}),Object(m.jsxs)("label",{htmlFor:"password",className:"form__label",children:[Object(m.jsx)("input",{type:"password",name:"password",id:"password",value:c,onChange:function(e){o(e.target.value)},className:"form__item form__item_theme_dark",placeholder:"Password",required:!0}),Object(m.jsx)("span",{className:"form__error"})]}),Object(m.jsxs)("div",{className:"form__footer",children:[Object(m.jsx)("button",{type:"submit",className:"form__btn form__btn_theme_dark",children:"Log in"}),Object(m.jsxs)("div",{className:"form__link-container",children:[Object(m.jsx)("span",{children:"Not a member yet?"}),Object(m.jsx)(s.b,{to:"/signup",className:"form__link",children:"Sign up here!"})]})]})]})})]})},S=function(e){var t=e.onSubmit,n=e.email,a=e.setEmail,c=e.password,o=e.setPassword;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f,{text:"Log in",link:"/signin"}),Object(m.jsx)("form",{id:"form",action:"#",className:"form login",onSubmit:t,children:Object(m.jsxs)("div",{className:"form__content",children:[Object(m.jsx)("h3",{className:"form__heading form__heading_theme_dark",children:"Sign Up"}),Object(m.jsxs)("label",{htmlFor:"email",className:"form__label",children:[Object(m.jsx)("input",{type:"email",name:"email",id:"email",value:n,onChange:function(e){a(e.target.value)},className:"form__item form__item_theme_dark",placeholder:"Email"}),Object(m.jsx)("span",{className:"form__error"})]}),Object(m.jsxs)("label",{htmlFor:"password",className:"form__label",children:[Object(m.jsx)("input",{type:"password",name:"password",id:"password",value:c,onChange:function(e){o(e.target.value)},className:"form__item form__item_theme_dark",placeholder:"Password"}),Object(m.jsx)("span",{className:"form__error"})]}),Object(m.jsxs)("div",{className:"form__footer",children:[Object(m.jsx)("button",{type:"submit",className:"form__btn form__btn_theme_dark",children:"Sign up"}),Object(m.jsxs)("div",{className:"form__link-container",children:[Object(m.jsx)("span",{children:"Already a member?"}),Object(m.jsx)(s.b,{to:"/signin",className:"form__link",children:"Log in here!"})]})]})]})})]})},w=function(e){return Object(m.jsx)("div",{className:"modal ".concat(e.isOpen?"modal_visible":""),children:Object(m.jsxs)("div",{className:"modal__content",children:[Object(m.jsx)("button",{className:"modal__closeBtn",onClick:e.onClose}),e.children]})})},y=function(e){return Object(m.jsx)(w,{isOpen:e.isOpen,onClose:e.onClose,children:Object(m.jsxs)("div",{className:"tool-tip",children:[Object(m.jsx)("img",{className:"tool-tip__img",alt:"status check",src:"success"===e.toolTipStatus?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC8dlA9AAAAEnRSTlMAIN/vYBCAQMBwMJDPoJ+wUNAZbz/2AAAEEUlEQVRo3tWb65qjIAyGSTgjasf7v9gt0t3MtnUAAz6d72/Vt/mIQU6iWdqqaXGIckvC6FbjrRZjZf2K21vh6q0YI+2d3H6UXBUMoP57/NdslAXI7kKwyqz0l1xXtp3lw9D56LlBzfhgL7YX1j2C8YVgQD2ujKoHFh/UqsQF9ZWtUV2ilVODe2HOaI7hkLFGN9427S4tcJbrJWEb0Sb/Y0a4iz5p1m44wslwI6OhAFPQvrVgTNtdRrC0+z2JFkFMPgXBFGCj3SHdMGnBlp6ayLfUvF50kU8NfRNVUulajs2v7qlaLrnDFxCZwR1HvhG3L/lWuEYSty9ZhsIVDC7juQO45GQ8LgzpdQ9iiMJP1dP3qBtNDyc7JtFfZKeEwwbWYpj0/fnuqBMDMVCBzH422oihMm/Nnu9Gi8GKb8y2Y40miH3NrEUM1/wSsqKAR0rL55CRMmuozFMmKUaNZoUc62sWP2THTml+yDOl9HBN31jQ1Bvy32WpKbWiuEyOKrar+fzs2TE7chrEZdJ3nP7rtBPXibxeuzodTLXXsqfTQZZqb2pamfO7Y0esZMV4HnMN8R2rh9p2mWLn6KmJe3EzuXTZmgMPvTqAf/KFRsb9tZJ9uYXpk5zOOuWW686F4kefTbm1Xsal7FLpBnMZly6eKKmv4FJaL8Ilv7lamrh7XqWGDh25kbiF9wnZlVp/52pRC75fXfX0419iIzfXjkowRFXBneu4IkErwXj04Q3fuUL0BpujfAUscHlgRaX/mGtEEzgX7J9Fj1+AySVwzevkXrodJpfe43LAROBwaRom1pRMmIlAtSmc4lLJTF1UzVoQCdXOlae49O0z0X3Vdk/6P6460ZeZRF8qh5ck9Bxu6op98jvW+YPbO8l2bs6r+o89cO+4oZ2ba0dLv2iYXHqbsOGDnnLspZ6cSOrCEKbwSiOcnd/z7YM2LxlcGrSdGKYCMrg0TKURer0McRlNTCP0et2QwaW5HpoNqRa4eIpLcz3kdaP0KSjN9ZDXlylmp2li8yKF7HTWfMWsMbGW14nN8YItu0sZbsQlmqgXvihkKnvqExZDrgoZXr+U3FULXlhYfRsieAdxQ9cHaB3xc5ZxhR+9FgNHYw43fqkeP2tzwgXbMT5tA4rQ8dgOfo1G/YGbjEQYt60KPnMj2dPWuV+9aY+4VeTQb80vcT97Q6gQ0HcLbGDs1mXsQm0cZfXZ5nzGOC+ZQdtIG7ubBKwd+HpOdzs4Z5Xc/YYTWCMp3PM78CdoxlK4vHMhS2i4ZcpYK3hSGR0VtJwSQsIy0F+VJ4ogUylatuy8ZeGiwgFULZivkUsnLJ0oypJuNcoGyNYCWGWWmJq1cEqIwV5LR8sOqL/1MB0dH/RmdV+Yg0R086Rse6R/AK9gZi1BzrKKAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAV1BMVEUAAAD9Bgb7CAj6BQX+Bwf9Bgb/EBD9Bgb6Bgb8Bgb7CAj7BAT+Bgb8Bgb8Bgb9Bgb8CAj8BQX8Bwf8Bwf7Bgb6Bgb+Bwf9CAj9Bwf9CAj8Bgb9Bwf9BwdeA8hAAAAAHHRSTlMA7yAw358QgHCQQEDPsKB/YGDAv4Bgv4DgcFDQeihFAwAABF1JREFUaN7Vm+mS2yAQhIdDRAeSLFs+l/d/zhizSVf5CDAG16b/WuLzNMOgY0TZMsPSNTuthfPSdjeu7WCoroZ21O6p9NgOVEem3Qn3T4lxLytQ/w7/Na1LL2VwV6p+Wcft37+0K8oepu+BT9PyYly1mfQ3uxlKYb+D3baRYORmG460+xJY/U2NJm5gf4Vc2xeJVnQ9JUtNAf2O4TJgjybztO7mUsNOs1YAm4k+erKY3wi3MUyzboZryQzX9sSW1D7oNrdgdO6qI72lm99d3r+13ifFJSLoTLuVP6EzfCKMyyJf/PSeqYjOfqIvlKSNP1YVgMK9TRIX7hSRBJnBrU++gFuWfIkcI8AtSxYqcgSb+9a4Fbhw0r4uDH65K6oi9a/q2abVDX4laV/b0VF5wU4hX06woWoy1/EP9ETz1QtJFaVg9r3Rv6iq1qdmT1ejqbLsE7P7ukYDMjxmVkPVNT2EvCDgmjLiPmSNzKqq9S6TlkiNrhayZdQsdsiH3JQ25UOeUlJ6TrkAvCSUbLBkym44p1x6Nm5OWMvCILVsAteTY1wXJx9QsXfO7ePcQI5x4+T2ml5wWka5UXLgxsnmeoj54/Q2esUEcoQLctTrMe60ipPBdb8SvRZwOo3M5WIRiZDfKJ+JZBYXOoUa0mJFJ5OZXNSrFlOcR+ZxUTfGsCMqYpDZXJK3yTVhqhlkJjeks6Eeq5hBZnHJ+uxqveEsMoOL7Nr7nXklHpnL9cwOSc0gZ3OR1g3tvN9cMo8b8spiNWWTIXCT19MJlZpBBjcbfD2LiEHmc0PtAJhBZnLJQwFmkMGtDQbZQR19ENw4SCgW2BdsJhdkBhjLicUFueo6BpdJRoZYlEwGl0FGyfRbFJfbiGwyrn269G3xcf9VPPLqmX6L4nKJSR6da73flstlkkNe+YLN5HLJoXZgPTG4mWSsJo0LegaXQUZS4xaGwWWQcQuDmzYGl0fWPrdwm8rgMsi4TcUdegaXScYU4w6dz30ky+gq3uNpSPzFH7gR8q+o005SqtfH+KhKxLl41pPs9TE+qhIpXLLBaTzYjJHjoyqRwFU3p7GiO4qS46MqEeXigS0ebEbJvwo8WZYO7ob0Wukj6rALI+QPSOq7LUl/KOQZG8NHQ5buYQ8+fOqFl468feMoM6URsi1OSnmPKEX1/Jqf71znOp0JkHxVcw/1X9Xrn9WcgI6JwkKvx09rQCFjn9hRrtnnJzYZkarXViV/ZiPZXevcf920B24SuVx7pAA3qSG0LVc3xCXZnbItsIrRrVugC9XKzJJ+1fzu/ssx7izeDHqwfnrPvGXA78A3t1b2Le/so7j5LRnYWSBcfgd+JxlYhMtSr51XozLmtgvYnt7TJqDtXuZ8JaSBfQP9lfhFkfRURFtA/eSCdLNXL6BLo8MxoimExRdFQWI3rsugZLBWymFZGyvCb/hKqCh7jH1aBmpp9S8/pjuNbU91Zfp2HbdfpxDk6bSduqXPj/Q3DCq+yOZMKjEAAAAASUVORK5CYII="}),Object(m.jsx)("p",{className:"tool-tip__text",children:"success"===e.toolTipStatus?"Success! You have now been registered":"Oops, something went wrong! Please try again."})]})})},B=n(19),L=n(20),T=new(function(){function e(t){var n=t.baseUrl;Object(B.a)(this,e),this._baseUrl=n}return Object(L.a)(e,[{key:"getInitialData",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"getInitialCards",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():Promise.reject("Error! ".concat(e.statusText))}))}},{key:"getUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error! ".concat(e.statusText))}))}},{key:"addCard",value:function(e,t){var n=e.link,a=e.name;return fetch("".concat(this._baseUrl,"/cards"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:a,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error! ".concat(e.statusText))}))}},{key:"deleteCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error! ".concat(e.statusText))}))}},{key:"editUserInfo",value:function(e,t){var n=e.name,a=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify({name:n,about:a})}).then((function(e){return e.ok?e.json():Promise.reject("Error! ".concat(e.statusText))}))}},{key:"changeLikeStatus",value:function(e,t,n){var a=t?"PUT":"DELETE";return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},method:a}).then((function(e){return e.ok?e.json():Promise.reject("Error! ".concat(e.statusText))}))}},{key:"setUserAvatar",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error! ".concat(e.statusText))}))}}]),e}())({baseUrl:"http://localhost:3000"}),E="http://localhost:3000";var U=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),r=Object(l.a)(o,2),s=r[0],j=r[1],b=Object(a.useState)(!1),f=Object(l.a)(b,2),h=f[0],v=f[1],N=Object(a.useState)(!1),w=Object(l.a)(N,2),B=w[0],L=w[1],U=Object(a.useState)(null),P=Object(l.a)(U,2),J=P[0],X=P[1],I=Object(a.useState)(!1),q=Object(l.a)(I,2),Z=q[0],F=q[1],R=Object(a.useState)(null),Q=Object(l.a)(R,2),M=Q[0],Y=Q[1],V=Object(a.useState)([]),z=Object(l.a)(V,2),D=z[0],K=z[1],W=Object(a.useState)(!1),G=Object(l.a)(W,2),H=G[0],$=G[1],ee=Object(a.useState)(""),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(""),oe=Object(l.a)(ce,2),re=oe[0],se=oe[1],ie=Object(d.g)({forceRefresh:!0}),le=localStorage.getItem("token"),de=Object(a.useState)(""),ue=Object(l.a)(de,2),me=ue[0],je=ue[1];function be(){v(!1),c(!1),j(!1),F(!1),L(!1)}function fe(e){F(!Z),X(e)}function he(e){var t=e.likes.some((function(e){return e===M._id}));T.changeLikeStatus(e._id,!t,le).then((function(t){var n=D.map((function(n){return n._id===e._id?t:n}));K(n)})).catch((function(e){return console.log(e)}))}function Oe(e){T.deleteCard(e._id,le).then((function(){var t=D.filter((function(t){return t._id!==e._id}));K(t)})).catch((function(e){return console.log(e)}))}var _e=function(e){je(e),L(!0)},pe=function(){ae(""),se("")},ge=function(){le&&function(e){return fetch("".concat(E,"/users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},method:"GET"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))}(le).then((function(e){$(!0),ae(e.email)})).catch((function(e){return console.log(e)})).finally((function(){return $(Boolean(le))}))};return Object(a.useEffect)((function(){ge(),H?ie.push("/main"):ie.push("/signin")}),[H]),Object(a.useEffect)((function(){le&&T.getUserInfo(le).then((function(e){Y(e)})).catch((function(e){console.log(e.message)}))}),[le]),Object(a.useEffect)((function(){le&&T.getInitialCards(le).then((function(e){K(e.map((function(e){return{name:e.name,link:e.link,likes:e.likes,_id:e._id,owner:e.owner}})))})).catch((function(e){console.log(e)}))}),[le]),Object(m.jsx)(u.Provider,{value:M,children:Object(m.jsx)("div",{className:"page",children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{exact:!0,path:"/",children:H?Object(m.jsx)(d.a,{to:"/main"}):Object(m.jsx)(d.a,{to:"/signin"})}),Object(m.jsxs)(d.b,{exact:!0,path:"/signin",children:[Object(m.jsx)(k,{loggedIn:H,onLogin:function(e){e.preventDefault(),function(e,t){return fetch("".concat(E,"/signin"),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e})).catch((function(e){console.log(e)}))}(ne,re).then((function(e){if(!ne||!re)throw _e("fail"),new Error("400 - one or more of the fields were not provided");if(!e)throw _e("fail"),new Error("01 - the user with the specified email not found");localStorage.setItem("token",e.token),$(!0)})).then((function(){ie.push("/main")})).catch((function(e){return console.log(e.message)}))},email:ne,password:re,setEmail:ae,setPassword:se}),Object(m.jsx)(y,{isOpen:B,onClose:be,toolTipStatus:me,loggedIn:H})]}),Object(m.jsxs)(d.b,{exact:!0,path:"/signup",children:[Object(m.jsx)(S,{loggedIn:H,onSubmit:function(e){e.preventDefault(),re&&ne?function(e,t){return fetch("".concat(E,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))}(ne,re).then((function(e){if(e&&200!==!e.statusCode)return _e("success"),e;throw _e("fail"),pe(),new Error("Bad Request")})).then(pe()).then((function(e){400!==e.statusCode?ie.push("/signin"):console.log("Something went wrong")})).catch((function(e){console.log(e)})):_e("fail")},email:ne,password:re,setEmail:ae,setPassword:se}),Object(m.jsx)(y,{isOpen:B,onClose:be,toolTipStatus:me,loggedIn:H})]}),Object(m.jsxs)(d.b,{path:"/main",children:[Object(m.jsx)(p,{card:J,isOpen:Z,onCardClick:fe}),Object(m.jsx)(A,{isOpen:h,onClose:be,onUpdateAvatar:function(e){var t=e.avatar;T.setUserAvatar(t.current.value,le).then((function(e){Y(e)})).then((function(){return v(!1)})).catch((function(e){return console.log(e)}))}}),Object(m.jsx)(g,{isOpen:n,onClose:be,onUpdateUser:function(e){var t=e.name,n=e.about;le&&T.editUserInfo({name:t,about:n},le).then((function(e){Y(e)})).then((function(){return c(!1)})).catch((function(e){return console.log(e)}))}}),Object(m.jsx)(x,{isOpen:s,onClose:be,onAddPlace:function(e){var t=e.link,n=e.name;le&&T.addCard({link:t,name:n},le).then((function(e){K([e].concat(Object(i.a)(D)))})).then((function(){return j(!1)})).catch((function(e){return console.log(e)}))}}),Object(m.jsx)(_,{name:"deleteCard",title:"Are you sure?",buttonText:"Yes",isOpen:!1,onClose:be}),Object(m.jsx)(C,{path:"/main",component:O,cards:D,onEditAvatar:function(){v(!0)},onEditProfile:function(){c(!0)},onAddPlace:function(){j(!0)},onCardClick:fe,selectedCard:J,onCardDelete:Oe,onCardLike:he,handleCardLike:he,handleCardDelete:Oe,loggedIn:H,email:ne,onSignOut:function(){localStorage.removeItem("token"),$(!1),Y({}),ie.push("/signin")}})]})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(s.a,{children:Object(m.jsx)(U,{})})}),document.getElementById("root")),P()}},[[38,1,2]]]);
//# sourceMappingURL=main.3663bd15.chunk.js.map